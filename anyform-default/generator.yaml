defaults:
  components: [] # All usable components
  edited-form: {}

imports:
  - anyform: 'anyform-core/helper/index.js'

translation-en:
  - Zurück: Back
  - Rückgängig: Revert
  - Speichern: Save
  - Bearbeiten: Edit

define-add-component-dialog:
  - + dialog: component selector
    path-reference: dialog
    content:
      - + button: add component
        path-repeat: components
        $label: anyform.renderComponentName(context)
        $on-click: get('tree').add(anyform.initComponent(context))

define-form-hierarchy: 
  - + group: when hierarchy is shown
    path-if: not selected
    content:
      - + navigation-bar:
        content-left:
          - + button: Hinzufügen
            $on-click: get('dialog').show()
          - + button: Bearbeiten
            path-if: highlighted
            $on-click: set('selected', get('highlighted'))
        content-right:
          - + button: Speichern
      - + tree-view:
        path-reference: tree
        bind-value: edited-form
        bind-highlight: highlighted
        $label: (e) => anyform.renderLabel(e, get('components'))
        actions:
          - label: Bearbeiten
            $on-click: (e) => set('selected', e)

define-configure-component:
  - + group: when component is configured
    path-if: selected
    content:
      - + navigation-bar:
        content-left:
          - + button: Zurück
            $onClick: |
              () => {
                set('highlighted', get('selected'));
                set('selected', null);
              }
      - + embedded-form: configuration form
        bind-value: selected
        $form: |
          anyform.getEditor(get('selected'), get('components'))

entry:
  - + row: root
    content:
    - + div: left column
      grid: col-sm-6
      content:
        - include-add-component-dialog: {}
        - include-form-hierarchy: {}
        - include-configure-component: {}
    - + div: right column
      grid: col-sm-6
      content:
        - + embedded-form: preview form
          $components: anyform.getComponents(get('components'))
          bind-value: preview
          path-form: edited-form